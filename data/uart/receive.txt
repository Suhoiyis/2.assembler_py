# t0 存放UART基地址 (0x30000000)
# t1 存放临时状态值
# a0 存放接收到的数据

# 步骤1: 先加载UART外设的基地址
lui   t0, 0x30000       # t0 = 0x30000000

# 步骤2: 循环检查接收状态，直到接收完成
wait_rx:
    lw    t1, 4(t0)         # 从地址 t0+4 (0x30000004) 加载 UART_STATUS 的值到 t1
    andi  t1, t1, 2         # 按位与，，仅保留 t1 的第1位 (接收完成标志位, 1表示接收完成，0表示正在接收）（2的二进制是000010)其他位归零
    beq   t1, zero, wait_rx # 如果 t1 等于0 (即接收未完成), 则跳转回 wait_rx 继续等待

# 步骤3: 接收已完成，可以读取数据
lw    a0, 16(t0)        # 从地址 t0+16 (0x30000010), 即 UART_RXDATA, 读取数据到 a0