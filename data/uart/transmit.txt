# t0 存放UART基地址 (0x30000000)
# t1 存放临时状态值
# a0 存放要发送的数据

# 步骤1: 将UART外设的基地址加载到寄存器中
lui   t0, 0x30000       # t0 = 0x30000000

# 步骤2: 循环检查发送状态，直到发送器空闲
wait_tx:
    lw    t1, 4(t0)         # 从地址 t0+4 (0x30000004) 加载 UART_STATUS 的值到 t1
    andi  t1, t1, 1         # 按位与，，只保留 t1 的第0位 (发送忙标志位，1表示正在发送，0为空闲), 其他位归零
    bne   t1, zero, wait_tx # 如果 t1 不等于0 (即忙标志位为1，表示正在发送), 则跳转回 wait_tx 继续等待

# 步骤3: 发送器已空闲，可以发送数据
sw    a0, 12(t0)        # 将 a0 中的数据写入到地址 t0+12 (0x3000000c), 即 UART_TXDATA